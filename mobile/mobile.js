!function(window,$){"use strict";{var ch={},navigator=($(window),window.navigator),userAgent=navigator.userAgent,document=window.document,$document=$(document),body=document.body,html=($(body),document.getElementsByTagName("html")[0]),$html=$(html),Object=window.Object,Array=window.Array;!function(){var prop,regex=/^(Webkit|Khtml|Moz|ms|O)(?=[A-Z])/,styleDeclaration=document.getElementsByTagName("script")[0].style;for(prop in styleDeclaration)if(regex.test(prop))return prop.match(regex)[0].toLowerCase();return"WebkitOpacity"in styleDeclaration?"webkit":"KhtmlOpacity"in styleDeclaration?"khtml":""}()}ch.util={isArray:function(){return"function"==typeof Array.isArray?Array.isArray:function(obj){if(void 0===obj)throw new Error('"ch.util.isArray(obj)": It must receive a parameter.');return"[object Array]"===Object.prototype.toString.call(obj)}}(),isUrl:function(url){return void 0===url||"string"!=typeof url?!1:/^(((https|http|ftp|file):\/\/)|www\.|\.\/|(\.\.\/)+|(\/{1,2})|(\d{1,3}\.){3}\d{1,3})(((\w+|-)(\.?)(\/?))+)(\:\d{1,5}){0,1}(((\w+|-)(\.?)(\/?)(#?))+)((\?)(\w+=(\w?)+(&?))+)?(\w+#\w+)?$/.test(url)},is$:function(){return void 0===$.zepto?function($el){return $el instanceof $}:function($el){return $.zepto.isZ($el)}}(),avoidTextSelection:function(){var args=arguments,len=arguments.length,i=0;if(arguments.length<1)throw new Error('"ch.util.avoidTextSelection(selector);": The selector parameter is required.');for(i;len>i;i+=1){if(!(args[i]instanceof $||$.zepto.isZ(args[i])))throw new Error('"ch.util.avoidTextSelection(selector);": The parameter must be a jQuery or Zepto selector.');$html.hasClass("lt-ie10")?args[i].attr("unselectable","on"):args[i].addClass("ch-user-no-select")}},getStyles:function(el,prop){if(void 0===el||1!==el.nodeType)throw new Error('"ch.util.getStyles(el, prop)": The "el" parameter is required and must be a HTMLElement.');if(void 0===prop||"string"!=typeof prop)throw new Error('"ch.util.getStyles(el, prop)": The "prop" parameter is required and must be a string.');return window.getComputedStyle?window.getComputedStyle(el,"").getPropertyValue(prop):(prop=prop.replace(/\-(\w)/g,function(str,$1){return $1.toUpperCase()}),el.currentStyle[prop])},clone:function(obj){if(void 0===obj||"object"!=typeof obj)throw new Error('"ch.util.clone(obj)": The "obj" parameter is required and must be a object.');var prop,copy={};for(prop in obj)void 0!==obj[prop]&&(copy[prop]=obj[prop]);return copy},inherits:function(obj,superConstructor){if(void 0===obj||"function"!=typeof obj)throw new Error('"ch.util.inherits(obj, superConstructor)": The "obj" parameter is required and must be a constructor function.');if(void 0===superConstructor||"function"!=typeof superConstructor)throw new Error('"ch.util.inherits(obj, superConstructor)": The "superConstructor" parameter is required and must be a constructor function.');var child=obj.prototype||{};return obj.prototype=$.extend(child,superConstructor.prototype),superConstructor.prototype},prevent:function(event){"object"==typeof event&&event.preventDefault()},getScroll:function(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}},getOuterDimensions:function(el){var obj=el.getBoundingClientRect();return{width:obj.right-obj.left,height:obj.bottom-obj.top}},getOffset:function(el){var rect=el.getBoundingClientRect(),fixedParent=ch.util.getPositionedParent(el,"fixed"),scroll=ch.util.getScroll(),offset={left:rect.left,top:rect.top};return"fixed"!==ch.util.getStyles(el,"position")&&null===fixedParent&&(offset.left+=scroll.left,offset.top+=scroll.top),offset},getPositionedParent:function(el,position){for(var parent,currentParent=el.offsetParent;void 0===parent;){if(null===currentParent){parent=null;break}ch.util.getStyles(currentParent,"position")!==position?currentParent=currentParent.offsetParent:parent=currentParent}return parent},VENDOR_PREFIX:function(){var prop,regex=/^(Webkit|Khtml|Moz|ms|O)(?=[A-Z])/,styleDeclaration=document.getElementsByTagName("script")[0].style;for(prop in styleDeclaration)if(regex.test(prop))return prop.match(regex)[0].toLowerCase();return"WebkitOpacity"in styleDeclaration?"webkit":"KhtmlOpacity"in styleDeclaration?"khtml":""}(),zIndex:1e3},ch.util.fixLabels=function(){function labelTap(){el=document.getElementById(this.getAttribute("for")),-1!==["radio","checkbox"].indexOf(el.getAttribute("type"))?el.setAttribute("selected",!el.getAttribute("selected")):el.focus()}for(var el,labels=document.getElementsByTagName("label"),i=0;labels[i];i+=1)labels[i].getAttribute("for")&&$(labels[i]).on(ch.onpointertap,labelTap)},ch.util.cancelPointerOnScroll=function(){$document.on("touchmove",function(){ch.pointerCanceled=!0,$document.one("touchend",function(){ch.pointerCanceled=!1})})},ch.util.MBP={viewportmeta:$("meta[name=viewport]"),gestureStart:function(){ch.util.MBP.viewportmeta.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6"},scaleFix:function(){ch.util.MBP.viewportmeta&&/iPhone|iPad|iPod/.test(userAgent)&&!/Opera Mini/.test(userAgent)&&(ch.util.MBP.viewportmeta.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0",document.addEventListener("gesturestart",ch.util.MBP.gestureStart,!1))},BODY_SCROLL_TOP:!1,hideUrlBar:function(){window.location.hash||ch.util.MBP.BODY_SCROLL_TOP===!1||window.scrollTo(0,1===ch.util.MBP.BODY_SCROLL_TOP?0:1)},hideUrlBarOnLoad:function(){if(!window.location.hash&&window.addEventListener){var scrollTop=ch.util.getScroll().top;window.scrollTo(0,1),ch.util.MBP.BODY_SCROLL_TOP=1;var bodycheck=setInterval(function(){body&&(clearInterval(bodycheck),ch.util.MBP.BODY_SCROLL_TOP=scrollTop,ch.util.MBP.hideUrlBar())},15);window.addEventListener("load",function(){setTimeout(function(){20>scrollTop&&ch.util.MBP.hideUrlBar()},0)})}},preventZoom:function(){for(var formFields=$("input, select, textarea"),contentString="width=device-width,initial-scale=1,maximum-scale=",i=0;i<formFields.length;i+=1)formFields[i].onfocus=function(){ch.util.MBP.viewportmeta.content=contentString+"1"},formFields[i].onblur=function(){ch.util.MBP.viewportmeta.content=contentString+"10"}}},ch.support={transition:void 0!==body.style.WebkitTransition||void 0!==body.style.MozTransition||void 0!==body.style.MSTransition||void 0!==body.style.OTransition||void 0!==body.style.transition,fx:!!$.fn.slideDown,touch:"createTouch"in document},ch.onlayoutchange="layoutchange",ch.onresize="resize",ch.onscroll="scroll",ch.onpointerdown=ch.support.touch?"touchstart":"mousedown",ch.onpointerup=ch.support.touch?"touchend":"mouseup",ch.onpointermove=ch.support.touch?"touchmove":"mousemove",ch.onpointertap=ch.support.touch?"touchend":"click",ch.onpointerenter=ch.support.touch?"touchstart":"mouseenter",ch.onpointerleave=ch.support.touch?"touchend":"mouseleave",ch.onkeyinput="oninput"in document.createElement("input")?"input":"keydown",ch.factory=function(Klass,fn){var name=Klass.prototype.name,constructorName=Klass.prototype._preset||name;ch[name.charAt(0).toUpperCase()+name.substr(1)]=Klass,$[name]=function($el,options){return new Klass($el,options)},$.fn[name]=function(options){var components=[];return options=void 0!==fn?fn.apply(this,arguments):options,$.each(this,function(){var $el=$(this),data=$el.data(constructorName);void 0===data?(data=new Klass($el,options),$el.data(constructorName,data)):void 0!==data.emit&&data.emit("exist",options),components.push(data)}),components.length>1?components:components[0]}},$html.removeClass("no-js"),ch.util.MBP.scaleFix(),ch.util.MBP.hideUrlBarOnLoad(),ch.util.MBP.preventZoom(),ch.util.fixLabels(),ch.util.cancelPointerOnScroll(),ch.$=$,ch.version="1.2.0",window.ch=ch}(this,this.$),function(ch){"use strict";function EventEmitter(){}EventEmitter.prototype.on=function(event,listener,once){if(void 0===event)throw new Error('ch.EventEmitter - "on(event, listener)": It should receive an event.');if(void 0===listener)throw new Error('ch.EventEmitter - "on(event, listener)": It should receive a listener function.');return this._eventsCollection=this._eventsCollection||{},listener.once=once||!1,void 0===this._eventsCollection[event]&&(this._eventsCollection[event]=[]),this._eventsCollection[event].push(listener),this},EventEmitter.prototype.once=function(event,listener){return this.on(event,listener,!0),this},EventEmitter.prototype.off=function(event,listener){if(void 0===event)throw new Error('EventEmitter - "off(event, listener)": It should receive an event.');if(void 0===listener)throw new Error('EventEmitter - "off(event, listener)": It should receive a listener function.');var len,listeners=this._eventsCollection[event],i=0;if(void 0!==listeners)for(len=listeners.length,i;len>i;i+=1)if(listeners[i]===listener){listeners.splice(i,1);break}return this},EventEmitter.prototype.getListeners=function(event){if(void 0===event)throw new Error('ch.EventEmitter - "getListeners(event)": It should receive an event.');return this._eventsCollection[event]},EventEmitter.prototype.emit=function(){var listeners,len,args=Array.prototype.slice.call(arguments,0),event=args.shift(),i=0;if(void 0===event)throw new Error('ch.EventEmitter - "emit(event)": It should receive an event.');if("string"==typeof event&&(event={type:event}),event.target||(event.target=this),void 0!==this._eventsCollection&&void 0!==this._eventsCollection[event.type])for(listeners=this._eventsCollection[event.type],len=listeners.length,i;len>i;i+=1)listeners[i].apply(this,args),listeners[i].once&&(this.off(event.type,listeners[i]),len-=1,i-=1);return this},ch.EventEmitter=EventEmitter}(this.ch),function($,ch){"use strict";function Content(){function setAsyncContent(event){that._$content.html(event.response),that.emit("_contentchange"),that.emit("content"+event.status,event)}function setContent(content){that._$content.html(content),that._options.cache=!0,that.emit("_contentchange"),that.emit("contentdone")}function getAsyncContent(url,options){options=$.extend({method:"GET",params:"",async:!0,waiting:'<div class="ch-loading-large"></div>'},options||defaults),void 0!==options.cache&&(that._options.cache=options.cache),setAsyncContent({status:"waiting",response:options.waiting}),$.ajax({url:url,type:options.method,data:"x=x"+(""!==options.params?"&"+options.params:""),cache:that._options.cache,async:options.async,beforeSend:function(jqXHR){jqXHR.setRequestHeader("X-Requested-With","XMLHttpRequest")},success:function(data){setAsyncContent({status:"done",response:data})},error:function(jqXHR,textStatus,errorThrown){setAsyncContent({status:"error",response:"<p>Error on ajax call.</p>",data:{jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown}})}})}var that=this,defaults={method:this._options.method,params:this._options.params,cache:this._options.cache,async:this._options.async,waiting:this._options.waiting};this.content=function(content,options){return void 0===content?that._$content.html():(that._options.content=content,void 0===that._options.cache&&(that._options.cache=!0),"string"==typeof content?ch.util.isUrl(content)?getAsyncContent(content,options):setContent(content):(ch.util.is$(content)||void 0!==content.nodeType)&&setContent($(content).remove(null,!0).removeClass("ch-hide")),that)},this.once("_show",function(){that.content(that._options.content),that.on("show",function(){that._options.cache||that.content(that._options.content)})})}ch.Content=Content}(this.ch.$,this.ch),function(ch){"use strict";function Collapsible(){function showCallback(){that.$container.removeClass("ch-hide").attr("aria-hidden","false"),that.emit("show")}function hideCallback(){that.$container.addClass("ch-hide").attr("aria-hidden","true"),that.emit("hide")}var that=this,triggerClass="ch-"+this.name+"-trigger-on",fx=this._options.fx,useEffects=ch.support.fx&&"none"!==fx&&fx!==!1;this._shown=!1,this._show=function(){return that._shown=!0,void 0!==that.$trigger&&that.$trigger.addClass(triggerClass),that.emit("beforeshow"),useEffects?that.$container[fx]("fast",showCallback):showCallback(),that.emit("_show"),that},this._hide=function(){return that._shown=!1,void 0!==that.$trigger&&that.$trigger.removeClass(triggerClass),that.emit("beforehide"),useEffects?that.$container[toggleEffects[fx]]("fast",hideCallback):hideCallback(),that},this._toggle=function(){return that._shown?that.hide():that.show(),that},this.on("disable",this.hide)}var toggleEffects={slideDown:"slideUp",slideUp:"slideDown",fadeIn:"fadeOut",fadeOut:"fadeIn"};ch.Collapsible=Collapsible}(this.ch),function(window,$,ch){"use strict";function update(){var eve=resized?ch.onresize:ch.onscroll;this.refresh(),resized=!1,scrolled=!1,this.emit(eve)}function Viewport(){this._init()}var $window=$(window),resized=!1,scrolled=!1,requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)}}();ch.util.inherits(Viewport,ch.EventEmitter),Viewport.prototype._init=function(){var that=this;this.$el=$window,this.refresh(),$window.on(ch.onresize+".viewport",function(){resized||(resized=!0,requestAnimFrame(function(){update.call(that)}))}).on(ch.onscroll+".viewport",function(){scrolled||(scrolled=!0,requestAnimFrame(function(){update.call(that)}))})},Viewport.prototype.calculateClientRect=function(){return this.top=this.left=0,this.bottom=this.$el.height(),this.right=this.$el.width(),this},Viewport.prototype.calculateDimensions=function(){return this.calculateClientRect(),this.height=this.bottom,this.width=this.right,this},Viewport.prototype.calculateOffset=function(){var scroll=ch.util.getScroll();return this.offsetTop=scroll.top,this.offsetLeft=scroll.left,this.offsetRight=this.left+this.width,this.offsetBottom=this.offsetTop+this.height,this},Viewport.prototype.calculateOrientation=function(){return this.orientation=90===Math.abs(this.$el.orientation)?"landscape":"portrait",this},Viewport.prototype.inViewport=function(el){var r=el.getBoundingClientRect();return r.top>0&&r.right<this.width&&r.bottom<this.height&&r.left>0},Viewport.prototype.isVisible=function(el){var r=el.getBoundingClientRect();return r.height>=this.offsetTop},Viewport.prototype.refresh=function(){return this.calculateDimensions(),this.calculateOffset(),this.calculateOrientation(),this},ch.viewport=new Viewport}(this,this.ch.$,this.ch),function(window,$,ch){"use strict";function Positioner(options){if(void 0===options)throw new window.Error("ch.Positioner: Expected options defined.");this._options=ch.util.clone(this._defaults),this._configure(options)}Positioner.prototype.name="positioner",Positioner.prototype._constructor=Positioner,Positioner.prototype._defaults={offsetX:0,offsetY:0,side:"center",align:"center",reference:ch.viewport,position:"fixed"},Positioner.prototype._configure=function(options){return $.extend(this._options,options),this._options.offsetX=parseInt(this._options.offsetX,10),this._options.offsetY=parseInt(this._options.offsetY,10),this.$target=options.target||this.$target,this.$reference=options.reference||this.$reference,this._reference=this._options.reference,this.$target.css("position",this._options.position),this},Positioner.prototype.refresh=function(options){return void 0!==options&&this._configure(options),this._reference!==ch.viewport&&this._calculateReference(),this._calculateTarget(),this._setPoint(),this},Positioner.prototype._calculateReference=function(){var offset,reference=this.$reference[0];return reference.setAttribute("data-side",this._options.side),reference.setAttribute("data-align",this._options.align),this._reference=ch.util.getOuterDimensions(reference),reference.offsetParent===this.$target[0].offsetParent?(this._reference.left=reference.offsetLeft,this._reference.top=reference.offsetTop):(offset=ch.util.getOffset(reference),this._reference.left=offset.left,this._reference.top=offset.top),this},Positioner.prototype._calculateTarget=function(){var target=this.$target[0];return target.setAttribute("data-side",this._options.side),target.setAttribute("data-align",this._options.align),this._target=ch.util.getOuterDimensions(target),this},Positioner.prototype._setPoint=function(){var coors,oritentationMap,side=this._options.side,oritentation="top"===side||"bottom"===side?"horizontal":"right"===side||"left"===side?"vertical":"center";return"center"===oritentation?coors={top:this._reference.top+(this._reference.height/2-this._target.height/2),left:this._reference.left+(this._reference.width/2-this._target.width/2)}:"horizontal"===oritentation?(oritentationMap={left:this._reference.left,center:this._reference.left+(this._reference.width/2-this._target.width/2),right:this._reference.left+this._reference.width-this._target.width,top:this._reference.top-this._target.height,bottom:this._reference.top+this._reference.height},coors={top:oritentationMap[side],left:oritentationMap[this._options.align]}):(oritentationMap={top:this._reference.top,center:this._reference.top+(this._reference.height/2-this._target.height/2),bottom:this._reference.top+this._reference.height-this._target.height,right:this._reference.left+this._reference.width,left:this._reference.left-this._target.width},coors={top:oritentationMap[this._options.align],left:oritentationMap[side]}),coors.top+=this._options.offsetY,coors.left+=this._options.offsetX,this.$target.css(coors),this},ch.Positioner=Positioner}(this,this.ch.$,this.ch),function(window,$,ch){"use strict";function Component($el,options){var that=this;this._init($el,options),void 0!==this.initialize&&this.initialize(),window.setTimeout(function(){that.emit("ready")},50)}var util=ch.util,uid=0;ch.util.inherits(Component,ch.EventEmitter),Component.prototype.name="component",Component.prototype.constructor=Component,Component.prototype._init=function($el,options){var defaults=this._defaults?util.clone(this._defaults):{};if(void 0===options)void 0===$el?this._options=defaults:util.is$($el)?(this._$el=$el,this._el=$el[0],this._options=defaults):"object"==typeof $el&&(options=$el,$el=void 0,this._options=$.extend(defaults,options));else{if("object"!=typeof options)throw new window.Error("Unexpected parameters were found in the '"+this.name+"' instantiation.");void 0===$el?this._options=$.extend(defaults,options):util.is$($el)&&(this._$el=$el,this._el=$el[0],this._options=$.extend(defaults,options))}this.uid=uid+=1,this._enabled=!0},Component.prototype.require=function(){var arg,i=0,len=arguments.length;for(i;len>i;i+=1)arg=arguments[i],void 0===this[arg.toLowerCase()]&&ch[arg].call(this);return this},Component.prototype.enable=function(){return this._enabled=!0,this.emit("enable"),this},Component.prototype.disable=function(){return this._enabled=!1,this.emit("disable"),this},Component.prototype.destroy=function(){this.disable(),void 0!==this._el&&this._$el.removeData(this.name),this.emit("destroy")},ch.Component=Component}(this,this.ch.$,this.ch),function(window,$,ch){"use strict";function normalizeOptions(options){return("string"==typeof options||ch.util.is$(options))&&(options={content:options}),options}function Expandable($el,options){var that=this;this._init($el,options),void 0!==this.initialize&&this.initialize(),window.setTimeout(function(){that.emit("ready")},50)}var $document=$(window.document),parent=ch.util.inherits(Expandable,ch.Component);Expandable.prototype.name="expandable",Expandable.prototype.constructor=Expandable,Expandable.prototype._defaults={_classNameTrigger:"ch-expandable-trigger ch-expandable-ico",_classNameContainer:"ch-expandable-container ch-hide",fx:!1,toggle:!0},Expandable.prototype._init=function($el,options){parent._init.call(this,$el,options),this.require("Collapsible","Content");var that=this;return this.$trigger=this._$el.addClass(this._options._classNameTrigger).on(ch.onpointertap+"."+this.name,function(event){ch.pointerCanceled||(ch.util.prevent(event),that._options.toggle?that._toggle():that.show())}),this.$container=this._$content=(this._options.container||this._$el.next()).addClass(this._options._classNameContainer).attr("aria-expanded","false"),""===this.$container.prop("id")&&this.$container.prop("id","ch-expandable-"+this.uid),this.$trigger.attr("aria-controls",this.$container.prop("id")),this.on("show",function(){$document.trigger(ch.onlayoutchange)}).on("hide",function(){$document.trigger(ch.onlayoutchange)}),ch.util.avoidTextSelection(this.$trigger),this},Expandable.prototype.show=function(content,options){return this._enabled?(this._show(),this.$container.attr("aria-expanded","true"),void 0!==content&&this.content(content,options),this):this},Expandable.prototype.hide=function(){return this._enabled?(this._hide(),this.$container.attr("aria-expanded","false"),this):this},Expandable.prototype.isShown=function(){return this._shown},Expandable.prototype.destroy=function(){this.$trigger.off(".expandable").removeClass("ch-expandable-trigger ch-expandable-ico ch-user-no-select").removeAttr("aria-controls"),this.$container.removeClass("ch-expandable-container ch-hide").removeAttr("aria-expanded aria-hidden"),$document.trigger(ch.onlayoutchange),parent.destroy.call(this)},ch.factory(Expandable,normalizeOptions)}(this,this.ch.$,this.ch),function(window,$,ch){"use strict";function Menu($el,options){var that=this;that._init($el,options),void 0!==this.initialize&&this.initialize(),window.setTimeout(function(){that.emit("ready")},50)}function createMethods(method){Menu.prototype[method]=function(child){var i,fold=this.folds[child-1];if(fold&&"expandable"===fold.name)fold[method]();else{for(i=this.folds.length;i;)fold=this.folds[i-=1],"expandable"===fold.name&&fold[method]();parent[method].call(this),this._el.setAttribute("aria-disabled",!this._enabled)}return this}}var parent=ch.util.inherits(Menu,ch.Component),methods=["enable","disable"],len=methods.length;for(Menu.prototype.name="menu",Menu.prototype.constructor=Menu,Menu.prototype._defaults={fx:"slideDown"},Menu.prototype._init=function($el,options){return parent._init.call(this,$el,options),this._snippet=this._el.cloneNode(!0),this.$container=this._$el.attr("role","navigation").addClass("ch-menu "+(this._options._className||"")+" "+(this._options.addClass||"")),this.folds=[],this._createExpandables(),this},Menu.prototype._createExpandables=function(){function createExpandable(i,li){if($li=$(li).addClass("ch-menu-fold"),$child=$li.children(":first-child"),"A"===$child[0].tagName)$li.attr("role","presentation"),$child.addClass("ch-fold-trigger"),that.folds.push($child);else{var expandable=$child.expandable({fx:that._options.fx});expandable.on("show",function(){that.emit("show",i+1)}).on("hide",function(){that.emit("hide")}),$child.next().attr("role","menu").children().attr("role","presentation").children().attr("role","menuitem"),that.folds.push(expandable)}}var $li,$child,that=this;return $.each(this.$container.children(),createExpandable),this},Menu.prototype.show=function(child){return this.folds[child-1].show(),this},Menu.prototype.hide=function(child){return this.folds[child-1].hide(),this},Menu.prototype.content=function(fold,content,options){if(void 0===fold||"number"!=typeof fold)throw new window.Error("Menu.content(fold, content, options): Expected number of fold.");return void 0===content?this.folds[fold-1].content():(this.folds[fold-1].content(content,options),this)};len;)createMethods(methods[len-=1]);Menu.prototype.destroy=function(){$.each(this.folds,function(i,e){void 0!==e.destroy&&e.destroy()}),this._el.parentNode.replaceChild(this._snippet,this._el),$(window.document).trigger(ch.onlayoutchange),parent.destroy.call(this)},ch.factory(Menu)}(this,this.ch.$,this.ch),function(window,$,ch){"use strict";function Popover($el,options){var that=this;this._init($el,options),void 0!==this.initialize&&this.initialize(),window.setTimeout(function(){that.emit("ready")},50)}var $document=$(window.document),$body=$("body"),parent=ch.util.inherits(Popover,ch.Component),shownbyEvent={pointertap:ch.onpointertap,pointerenter:ch.onpointerenter};Popover.prototype.name="popover",Popover.prototype.constructor=Popover,Popover.prototype._defaults={_ariaRole:"dialog",_className:"",_hideDelay:400,addClass:"",fx:"fadeIn",width:"auto",height:"auto",shownby:"pointertap",hiddenby:"button",waiting:'<div class="ch-loading ch-loading-centered"></div>',position:"absolute"},Popover.prototype._init=function($el,options){parent._init.call(this,$el,options),this.require("Collapsible","Content");var that=this;return this.$container=$(["<div",' class="ch-popover ch-hide '+this._options._className+" "+this._options.addClass+'"',' role="'+this._options._ariaRole+'"',' id="ch-'+this.name+"-"+this.uid+'"',' style="z-index:'+(ch.util.zIndex+=1)+";width:"+this._options.width+";height:"+this._options.height+'"',">"].join("")).on(ch.onpointertap+"."+this.name,function(event){event.stopPropagation()}),this._$content=$('<div class="ch-popover-content">').appendTo(this.$container),this._configureTrigger(),this._configureHiding(),this._positioner=new ch.Positioner({target:this.$container,reference:this._options.reference,side:this._options.side,align:this._options.align,offsetX:this._options.offsetX,offsetY:this._options.offsetY,position:this._options.position}),this._refreshPositionListener=function(){return that._shown&&that._positioner.refresh(options),that},$document.on(ch.onlayoutchange,this._refreshPositionListener),ch.viewport.on(ch.onresize,this._refreshPositionListener),this.once("_show",this._refreshPositionListener).on("_contentchange",this._refreshPositionListener).on("hide",function(){that.$container.remove(null,!0)}),this},Popover.prototype._configureTrigger=function(){if(void 0!==this._el){var that=this,showHandler=function(){var fn=that._toggle;return("pointerenter"===that._options.shownby||"none"===that._options.hiddenby||"button"===that._options.hiddenby)&&(fn=function(){that._shown||that.show()}),fn}();this._snippet=this._el.cloneNode(!0),this._options.reference=this._options.reference||this._$el,"none"!==this._options.shownby&&this._$el.addClass("ch-shownby-"+this._options.shownby).on(shownbyEvent[this._options.shownby]+"."+this.name,function(event){ch.util.prevent(event),showHandler()}),void 0===this._options.content&&("A"===this._el.nodeName&&""!==this._el.href?this._options.content=this._el.href:(""!==this._el.title||""!==this._el.alt)&&(this._options.content=this._el.title||this._el.alt,this._el.setAttribute("data-title",this._options.content),this._el.title=this._el.alt="")),this._el.setAttribute("aria-owns","ch-"+this.name+"-"+this.uid),this._el.setAttribute("aria-haspopup","true"),this.$trigger=this._$el}},Popover.prototype._configureHiding=function(){function hideTimer(){timeout=window.setTimeout(function(){that.hide()},that._options._hideDelay)}var timeout,that=this,hiddenby=this._options.hiddenby,pointertap=ch.onpointertap+"."+this.name,events={};"none"!==hiddenby&&("pointerleave"===hiddenby&&void 0!==this.$trigger&&(events[ch.onpointerenter+"."+this.name]=function(){window.clearTimeout(timeout)},events[ch.onpointerleave+"."+this.name]=hideTimer,this.$trigger.on(events),this.$container.on(events)),("button"===hiddenby||"all"===hiddenby)&&$('<i class="ch-close" role="button" aria-label="Close"></i>').on(pointertap,function(){that.hide()}).prependTo(this.$container),"pointers"!==hiddenby&&"all"!==hiddenby||void 0===this._hidingShortcuts||this._hidingShortcuts())},Popover.prototype._normalizeOptions=function(options){return("string"==typeof options||ch.util.is$(options))&&(options={content:options}),options},Popover.prototype.show=function(content,options){return!this._enabled||this._shown?this:(this.$container.css("z-index",ch.util.zIndex+=1).appendTo($body),this._show(),void 0!==content&&this.content(content,options),this)},Popover.prototype.hide=function(){return this._enabled&&this._shown?(this._hide(),this):this},Popover.prototype.isShown=function(){return this._shown},Popover.prototype.width=function(data){return void 0===data?this._options.width:(this.$container.css("width",data),this._options.width=data,this.refreshPosition(),this)},Popover.prototype.height=function(data){return void 0===data?this._options.height:(this.$container.css("height",data),this._options.height=data,this.refreshPosition(),this)},Popover.prototype.refreshPosition=function(options){return this._shown?this._positioner.refresh(options):this._positioner._configure(options),this},Popover.prototype.enable=function(){return void 0!==this._el&&this._el.setAttribute("aria-disabled",!1),parent.enable.call(this),this},Popover.prototype.disable=function(){return void 0!==this._el&&this._el.setAttribute("aria-disabled",!0),this._shown&&this.hide(),parent.disable.call(this),this},Popover.prototype.destroy=function(){void 0!==this.$trigger&&this.$trigger.off("."+this.name).removeClass("ch-"+this.name+"-trigger").removeAttr("data-title aria-owns aria-haspopup data-side data-align role").attr({alt:this._snippet.alt,title:this._snippet.title}),$document.off(ch.onlayoutchange,this._refreshPositionListener),ch.viewport.off(ch.onresize,this._refreshPositionListener),parent.destroy.call(this)},ch.factory(Popover,Popover.prototype._normalizeOptions)}(this,this.ch.$,this.ch),function(window,$,ch){"use strict";function Modal($el,options){var that=this;this._init($el,options),void 0!==this.initialize&&this.initialize(),window.setTimeout(function(){that.emit("ready")},50)}var $body=$("body"),$underlay=$('<div class="ch-underlay ch-hide" tabindex="-1">'),parent=ch.util.inherits(Modal,ch.Popover);Modal.prototype.name="modal",Modal.prototype.constructor=Modal,Modal.prototype._defaults=$.extend(ch.util.clone(parent._defaults),{_className:"ch-modal ch-box-lite",_ariaRole:"dialog",width:"50%",hiddenby:"all",reference:ch.viewport,waiting:'<div class="ch-loading-large ch-loading-centered"></div>',position:"fixed"}),Modal.prototype._showUnderlay=function(){$underlay.css("z-index",ch.util.zIndex).appendTo($body),"none"!==this._options.fx?$underlay.fadeIn(function(){$underlay.removeClass("ch-hide")}):$underlay.removeClass("ch-hide")},Modal.prototype._hideUnderlay=function(){"none"!==this._options.fx?$underlay.fadeOut("normal",function(){$underlay.remove(null,!0)}):$underlay.addClass("ch-hide").remove(null,!0)},Modal.prototype.show=function(content,options){if(!this._enabled||this._shown)return this;var that=this;return("all"===this._options.hiddenby||"pointers"===this._options.hiddenby)&&$underlay.one(ch.onpointertap,function(){that.hide()}),this._showUnderlay(),parent.show.call(this,content,options),this},Modal.prototype.hide=function(){return this._shown?($underlay.off(ch.onpointertap),this._hideUnderlay(),parent.hide.call(this),this):this},ch.factory(Modal,parent._normalizeOptions)}(this,this.ch.$,this.ch),function($,ch){"use strict";function Transition($el,options){return void 0!==options||void 0===$el||ch.util.is$($el)||(options=$el,$el=void 0),options=$.extend(ch.util.clone(this._defaults),options),options.content=$('<div class="ch-loading-large"></div><p>'+options.content+"</p>"),new ch.Modal($el,options)}Transition.prototype.name="transition",Transition.prototype.constructor=Transition,Transition.prototype._defaults=$.extend(ch.util.clone(ch.Modal.prototype._defaults),{_className:"ch-transition ch-box-lite",_ariaRole:"alert",hiddenby:"none",content:"Please wait..."}),ch.factory(Transition,ch.Modal.prototype._normalizeOptions)}(this.ch.$,this.ch),function(window,$,ch){"use strict";function Form($el,options){var that=this;that._init($el,options),void 0!==this.initialize&&this.initialize(),window.setTimeout(function(){that.emit("ready")},50)}var parent=ch.util.inherits(Form,ch.Component);Form.prototype.name="form",Form.prototype.constructor=Form,Form.prototype._init=function($el,options){parent._init.call(this,$el,options);var that=this;return this.errors=[],this._messages=this._options.messages||{},this.validations=[],this.$container=this._$el.addClass("ch-form").attr("novalidate","novalidate").on("submit.form",function(event){that.validate(event)}),this.$container.find('input[type="reset"]').on(ch.onpointertap+".form",function(event){
ch.util.prevent(event),that.reset()}),this.on("disable",this.clear),this},Form.prototype.validate=function(event){if(!this._enabled)return this;this.emit("beforevalidate");var validation,firstError,firstErrorVisible,triggerError,that=this,i=0,j=that.validations.length;for(this.errors.length=0,i;j>i;i+=1)validation=that.validations[i],validation.validate(),validation.isShown()&&that.errors.push(validation);if(that.errors.length>0){for(firstError=that.errors[0],firstErrorVisible=firstError.$trigger[0];"none"===ch.util.getStyles(firstErrorVisible,"display")&&firstErrorVisible!==document.documentElement;)firstErrorVisible=firstErrorVisible.parentElement;firstErrorVisible.scrollIntoView(),triggerError=firstError.$trigger[0],"DIV"===triggerError.tagName&&firstError.$trigger.find("input:first").focus(),("hidden"!==triggerError.type||"SELECT"===triggerError.tagName)&&triggerError.focus(),ch.util.prevent(event),this.emit("error",this.errors)}else this.emit("success",event);return this},Form.prototype.hasError=function(){if(!this._enabled)return!1;this.errors.length=0;var validation,i=0,j=this.validations.length;for(i;j>i;i+=1)validation=this.validations[i],validation.hasError()&&this.errors.push(validation);return this.errors.length>0?!0:!1},Form.prototype.clear=function(){var i=0,j=this.validations.length;for(i;j>i;i+=1)this.validations[i].clear();return this.emit("clear"),this},Form.prototype.reset=function(){return this.clear(),this._el.reset(),this.emit("reset"),this},Form.prototype.destroy=function(){this.$container.off(".form").removeAttr("novalidate"),$.each(this.validations,function(i,e){e.destroy()}),parent.destroy.call(this)},ch.factory(Form)}(this,this.ch.$,this.ch),function($,ch){"use strict";function Condition(condition){return $.extend(this,conditions[condition.name],condition),("min"===this.name||"max"===this.name||"minLength"===this.name||"maxLength"===this.name)&&(this.message=this.message.replace("{#num#}",this.num)),this._enabled=!0,this}var conditions={string:{fn:function(value){return/^([a-zA-Z\u00C0-\u00C4\u00C8-\u00CF\u00D2-\u00D6\u00D9-\u00DC\u00E0-\u00E4\u00E8-\u00EF\u00F2-\u00F6\u00E9-\u00FC\u00C7\u00E7\s]*)$/i.test(value)},message:"Use only letters."},email:{fn:function(value){return/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/i.test(value)},message:"Use a valid e-mail such as name@example.com."},url:{fn:function(value){return/^((https?|ftp|file):\/\/|((www|ftp)\.)|(\/|.*\/)*)[a-z0-9-]+((\.|\/)[a-z0-9-]+)+([/?].*)?$/i.test(value)},message:"It must be a valid URL."},minLength:{fn:function(a,b){return a.length>=b},message:"Enter at least {#num#} characters."},maxLength:{fn:function(a,b){return a.length<=b},message:"The maximum amount of characters is {#num#}."},number:{fn:function(value){return/^(-?[0-9]+)$/i.test(value)},message:"Use only numbers."},max:{fn:function(a,b){return b>=a},message:"The amount must be smaller than {#num#}."},min:{fn:function(a,b){return a>=b},message:"The amount must be higher than {#num#}."},required:{fn:function(value){var validated,tag=this.$trigger.hasClass("ch-form-options")?"OPTIONS":this._el.tagName;switch(tag){case"OPTIONS":validated=0!==this.$trigger.find("input:checked").length;break;case"SELECT":validated="-1"!==value&&""!==value;break;default:validated=0!==$.trim(value).length}return validated},message:"Fill in this information."},custom:{message:"Error"}};Condition.prototype.name="condition",Condition.prototype.constructor=Condition,Condition.prototype.enable=function(){return this._enabled=!0,this},Condition.prototype.disable=function(){return this._enabled=!1,this},Condition.prototype.test=function(value,validation){return this._enabled?this.fn.call(validation,value,this.num):!0},ch.Condition=Condition}(this.ch.$,this.ch),function(window,ch){"use strict";function Validation($el,options){var that=this;this._init($el,options),void 0!==this.initialize&&this.initialize(),window.setTimeout(function(){that.emit("ready")},50)}function createMethods(method){Validation.prototype[method]=function(condition){var key;if(void 0!==condition&&void 0!==this.conditions[condition])this.conditions[condition][method]();else{for(key in this.conditions)void 0!==this.conditions[key]&&this.conditions[key][method]();parent[method].call(this)}return this}}var parent=ch.util.inherits(Validation,ch.Component),methods=["enable","disable"],len=methods.length;for(Validation.prototype.name="validation",Validation.prototype.constructor=Validation,Validation.prototype._defaults={offsetX:10},Validation.prototype._init=function($el,options){var that=this;return parent._init.call(this,$el,options),this.$trigger=this._$el,this._configureContainer(),this.conditions={},this._mergeConditions(options.conditions),this._shown=!1,this.error=null,this.on("exist",function(data){this._mergeConditions(data.conditions)}).on("disable",this.clear),this.form=that.$trigger.parents("form").data("form")||that.$trigger.parents("form").form(),this.form.validations.push(this),this._validationEvent=this.$trigger.hasClass("ch-form-options")||"SELECT"===this._el.tagName||"INPUT"===this._el.tagName&&"range"===this._el.type?"change":"blur",this},Validation.prototype._mergeConditions=function(conditions){var i=0,j=conditions.length;for(i;j>i;i+=1)this.conditions[conditions[i].name]=new ch.Condition(conditions[i]);return this},Validation.prototype.validate=function(){return this.hasError()?this._error():this._success(),this},Validation.prototype._error=function(){var previousValue,that=this;return this.$trigger.on(this._validationEvent+".validation",function(){(previousValue!==this.value||"change"===that._validationEvent&&that.isShown())&&(previousValue=this.value,that.validate()),void 0===that.conditions.required&&""===this.value&&that.clear()}),this._error=function(){return that._previousError.condition&&that._shown||(("INPUT"===that._el.nodeName||"TEXTAREA"===that._el.nodeName)&&that.$trigger.addClass("ch-validation-error"),that._showErrorMessage(that.error.message||"Error")),that.error.condition!==that._previousError.condition&&that._showErrorMessage(that.error.message||that.form._messages[that.error.condition]||"Error"),that._shown=!0,that.emit("error",that.error),that},this._error(),this},Validation.prototype._success=function(){return(this._shown||!this._enabled)&&(this._shown=!1),this.$trigger.removeClass("ch-validation-error").removeAttr("aria-label"),this._hideErrorMessage(),this.emit("success"),this},Validation.prototype.hasError=function(){if(this.$trigger.attr("disabled")||!this._enabled)return!1;var condition,required=this.conditions.required,value=this._el.value;if(!required&&""===value&&this._shown===!1)return!1;this._previousError=ch.util.clone(this.error);for(condition in this.conditions)if(void 0!==this.conditions[condition]&&!this.conditions[condition].test(value,this))return this.error={condition:condition,message:this.conditions[condition].message},!0;return this.error=null,!1},Validation.prototype.clear=function(){return this.$trigger.removeClass("ch-validation-error").removeAttr("aria-label"),this.error=null,this._hideErrorMessage(),this._shown=!1,this.emit("clear"),this},Validation.prototype.and=function(){return this.$trigger},Validation.prototype.isShown=function(){return this._shown},Validation.prototype.message=function(condition,message){if(void 0===condition)throw new Error("validation.message(condition, message): Please, a condition parameter is required.");return void 0===message?this.conditions[condition].message:(this.conditions[condition].message=message,this.isShown()&&this.error.condition===condition&&this._showErrorMessage(message),this)};len;)createMethods(methods[len-=1]);Validation.prototype.destroy=function(){this.$trigger.off(".validation").removeAttr("data-side data-align"),parent.destroy.call(this)},ch.factory(Validation)}(this,this.ch),function(ch,$){"use strict";ch.Validation.prototype._configureContainer=function(){return this._container=$('<div class="ch-validation-message ch-hide">').appendTo(this.$trigger.parent()),this},ch.Validation.prototype._showErrorMessage=function(message){return this._container.html(message).removeClass("ch-hide"),this},ch.Validation.prototype._hideErrorMessage=function(){return this._container.addClass("ch-hide"),this}}(this.ch,this.ch.$),function(ch){"use strict";function normalizeOptions(message){var options,condition={name:"string"};return"object"==typeof message?(options=message,condition.message=options.message,delete options.message):(options={},condition.message=message),options.conditions=[condition],options}function Str($el,options){return new ch.Validation($el,options)}Str.prototype.name="string",Str.prototype.constructor=Str,Str.prototype._preset="validation",ch.factory(Str,normalizeOptions)}(this.ch),function(window,ch){"use strict";function normalizeOptions(num,message){var options,condition={name:"maxLength"};return"object"==typeof num?(options=num,condition.num=options.num,condition.message=options.message,delete options.num,delete options.message):(options={},condition.num=num,condition.message=message),options.conditions=[condition],options}function MaxLength($el,options){return new ch.Validation($el,options)}MaxLength.prototype.name="maxLength",MaxLength.prototype.constructor=ch.MaxLength,MaxLength.prototype._preset="validation",ch.factory(MaxLength,normalizeOptions)}(this,this.ch),function(window,ch){"use strict";function normalizeOptions(num,message){var options,condition={name:"minLength"};return"object"==typeof num?(options=num,condition.num=options.num,condition.message=options.message,delete options.num,delete options.message):(options={},condition.num=num,condition.message=message),options.conditions=[condition],options}function MinLength($el,options){return new ch.Validation($el,options)}MinLength.prototype.name="minLength",MinLength.prototype.constructor=ch.MinLength,MinLength.prototype._preset="validation",ch.factory(MinLength,normalizeOptions)}(this,this.ch),function(window,ch){"use strict";function normalizeOptions(message){var options,condition={name:"email"};return"object"==typeof message?(options=message,condition.message=options.message,delete options.message):(options={},condition.message=message),options.conditions=[condition],options}function Email($el,options){return new ch.Validation($el,options)}Email.prototype.name="email",Email.prototype.constructor=Email,Email.prototype._preset="validation",ch.factory(Email,normalizeOptions)}(this,this.ch),function(ch){"use strict";function normalizeOptions(message){var options,condition={name:"url"};return"object"==typeof message?(options=message,condition.message=options.message,delete options.message):(options={},condition.message=message),options.conditions=[condition],options}function URL($el,options){return new ch.Validation($el,options)}URL.prototype.name="url",URL.prototype.constructor=URL,URL.prototype._preset="validation",ch.factory(URL,normalizeOptions)}(this.ch),function(ch){"use strict";function normalizeOptions(message){var options,condition={name:"number"};return"object"==typeof message?(options=message,condition.message=options.message,delete options.message):(options={},condition.message=message),options.conditions=[condition],options}function Num($el,options){return new ch.Validation($el,options)}Num.prototype.name="number",Num.prototype.constructor=Num,Num.prototype._preset="validation",ch.factory(Num,normalizeOptions)}(this.ch),function(window,ch){"use strict";function normalizeOptions(num,message){var options,condition={name:"min"};return"object"==typeof num?(options=num,condition.num=options.num,condition.message=options.message,delete options.num,delete options.message):(options={},condition.num=num,condition.message=message),options.conditions=[condition],options}function Min($el,options){return new ch.Validation($el,options)}Min.prototype.name="min",Min.prototype.constructor=Min,Min.prototype._preset="validation",ch.factory(Min,normalizeOptions)}(this,this.ch),function(window,ch){"use strict";function normalizeOptions(num,message){var options,condition={name:"max"};return"object"==typeof num?(options=num,condition.num=options.num,condition.message=options.message,delete options.num,delete options.message):(options={},condition.num=num,condition.message=message),options.conditions=[condition],options}function Max($el,options){return new ch.Validation($el,options)}Max.prototype.name="max",Max.prototype.constructor=Max,Max.prototype._preset="validation",ch.factory(Max,normalizeOptions)}(this,this.ch),function(window,ch){"use strict";function normalizeOptions(name,fn,message){var options,condition={};return"object"==typeof name?(options=name,condition.name=options.name,condition.fn=options.fn,condition.message=options.message,delete options.name,delete options.fn,delete options.message):(options={},condition.name=name,condition.fn=fn,condition.message=message),options.conditions=[condition],options}function Custom($el,options){return new ch.Validation($el,options)}Custom.prototype.name="custom",Custom.prototype.constructor=Custom,Custom.prototype._preset="validation",ch.factory(Custom,normalizeOptions)}(this,this.ch),function(window,ch){"use strict";function normalizeOptions(message){var options,condition={name:"required"};return"object"==typeof message?(options=message,condition.message=options.message,delete options.message):(options={},condition.message=message),options.conditions=[condition],options}function Required($el,options){return new ch.Validation($el,options)}Required.prototype.name="required",Required.prototype.constructor=Required,Required.prototype._preset="validation",ch.factory(Required,normalizeOptions)}(this,this.ch),function(window,$,ch){"use strict";function normalizeOptions(options){var num=window.parseInt(options,10);return window.isNaN(num)||(options={max:num}),options}function Countdown($el,options){var that=this;that._init($el,options),void 0!==this.initialize&&this.initialize(),window.setTimeout(function(){that.emit("ready")},50)}var parent=ch.util.inherits(Countdown,ch.Component);Countdown.prototype.name="countdown",Countdown.prototype.constructor=Countdown,Countdown.prototype._defaults={plural:"# characters left.",singular:"# character left.",max:500},Countdown.prototype._init=function($el,options){parent._init.call(this,$el,options);var message,that=this,messageID="ch-countdown-message-"+that.uid;return this.$trigger=this._$el.on("keyup.countdown keypress.countdown keydown.countdown paste.countdown cut.countdown input.countdown",function(){that._count()}),that._remaining=that._options.max-that._contentLength(),message=1===that._remaining?that._options.singular:that._options.plural,that.$container=$('<p class="ch-countdown ch-form-hint" id="'+messageID+'">'+message.replace("#",that._remaining)+"</p>").appendTo(that._$el.parent()),this.on("disable",this._removeError),this},Countdown.prototype._contentLength=function(){return this._el.value.length},Countdown.prototype._count=function(){if(!this._enabled)return this;var message,length=this._contentLength();return this._remaining=this._options.max-length,length<=this._options.max?this._exceeded&&(this._exceeded=!1,this._removeError()):length>this._options.max&&(this.emit("exceed"),this._exceeded=!0,this.$trigger.addClass("ch-validation-error").attr("aria-invalid","true"),this.$container.addClass("ch-countdown-exceeded")),message=(1!==this._remaining?this._options.plural:this._options.singular).replace(/\#/g,this._remaining),this.$container.text(message),this},Countdown.prototype._removeError=function(){return this.$trigger.removeClass("ch-validation-error").attr("aria-invalid","false"),this.$container.removeClass("ch-countdown-exceeded"),this},Countdown.prototype.destroy=function(){this.$trigger.off(".countdown"),this.$container.remove(),$(window.document).trigger(ch.onlayoutchange),parent.destroy.call(this)},ch.factory(Countdown,normalizeOptions)}(this,this.ch.$,this.ch),function(window,$,ch){"use strict";function Carousel($el,options){var that=this;this._init($el,options),void 0!==this.initialize&&this.initialize(),window.setTimeout(function(){that.emit("ready")},50)}var pointertap=ch.onpointertap+".carousel",Math=window.Math,setTimeout=window.setTimeout,parent=ch.util.inherits(Carousel,ch.Component);Carousel.prototype.name="carousel",Carousel.prototype.constructor=Carousel,Carousel.prototype._defaults={async:0,arrows:!0,pagination:!1,fx:!0},Carousel.prototype._init=function($el,options){parent._init.call(this,$el,options);var that=this;return this._snippet=this._el.cloneNode(!0),this._$list=this._$el.addClass("ch-carousel").children().addClass("ch-carousel-list"),this._$items=this._$list.children().addClass("ch-carousel-item"),this._$mask=$('<div class="ch-carousel-mask" role="tabpanel">').html(this._$list).appendTo(this._$el),this._maskWidth=ch.util.getOuterDimensions(this._$mask[0]).width,this._itemWidth=this._$items.width(),this._itemOuterWidth=ch.util.getOuterDimensions(this._$items[0]).width,this._itemExtraWidth=0,this._itemHeight=this._$items.height(),this._itemMargin=0,this._arrowsCreated=!1,this._paginationCreated=!1,this._limitPerPage=0,this._currentPage=1,this._pages=0,this._pageWidth=0,this._async=this._options.async,this._$prevArrow=$('<div class="ch-carousel-prev ch-carousel-disabled" role="button" aria-hidden="true">').on(pointertap,function(){that.prev()}),that._$nextArrow=$('<div class="ch-carousel-next" role="button" aria-hidden="false">').on(pointertap,function(){that.next()}),this._$pagination=$('<div class="ch-carousel-pages" role="navigation">').on(pointertap,function(event){var page=event.target.getAttribute("data-page");null!==page&&that.select(window.parseInt(page,10))}),ch.viewport.on("resize",function(){that.refresh()}),this._options.fx||this._$list.addClass("ch-carousel-nofx"),ch.support.transition||this._$list.css({position:"absolute",left:"0"}),this._options.pagination&&this._addPagination(),void 0!==this._options.arrows&&this._options.arrows!==!1&&this._addArrows(),this._updateARIA(),this._updateLimitPerPage(),this._updateDistribution(),this},Carousel.prototype._updateARIA=function(){var page,that=this,total=this._$items.length+this._async;$.each(this._$items,function(i,item){page=Math.floor(i/that._limitPerPage)+1,item.setAttribute("aria-hidden",page!==that._currentPage),item.setAttribute("aria-setsize",total),item.setAttribute("aria-posinset",i+1),item.setAttribute("aria-label","page"+page)})},Carousel.prototype._loadAsyncItems=function(){if(0!==this._async){var $items,total=this._currentPage*this._limitPerPage,amount=total-this._$items.length,width=this._itemWidth+this._itemExtraWidth,height=(width*this._itemHeight/this._itemWidth).toFixed(3),item=["<li",' class="ch-carousel-item"',' style="width:'+width+"px;height:"+height+"px;margin-right:"+this._itemMargin+'px"',"></li>"].join(""),items="";if(!(1>amount)){for(amount=this._async<amount?this._async:amount;amount;)items+=item,amount-=1;$items=$(items),this._$list.append($items),this._$items=this._$list.children(),this._updateARIA(),this._async-=amount,this.emit("itemsadd",$items)}}},Carousel.prototype._addPagination=function(){this._paginationCreated&&this._removePagination();for(var isSelected,that=this,thumbs=[],page=that._pages;page;)isSelected=page===that._currentPage,thumbs.unshift("<span",' role="button"',' aria-selected="'+isSelected+'"',' aria-controls="page'+page+'"',' data-page="'+page+'"',' class="'+(isSelected?"ch-carousel-selected":"")+'"',">"+page+"</span>"),page-=1;that._$pagination.html(thumbs.join("")).appendTo(that._$el),ch.util.avoidTextSelection(that._$pagination),that._paginationCreated=!0},Carousel.prototype._removePagination=function(){this._paginationCreated&&(this._$pagination[0].innerHTML="",this._paginationCreated=!1)},Carousel.prototype._standbyFX=function(callback){var that=this;this._options.fx?(this._$list.addClass("ch-carousel-nofx"),callback.call(this),setTimeout(function(){that._$list.removeClass("ch-carousel-nofx")},0)):callback.call(this)},Carousel.prototype._updatePages=function(){this._pages=Math.ceil((this._$items.length+this._async)/this._limitPerPage),this._loadAsyncItems(),this._updateARIA(),this._updateArrows(),this._options.pagination&&this._addPagination()},Carousel.prototype._updateLimitPerPage=function(){var firstItemOnPage,max=this._options.limitPerPage,limitPerPage=Math.floor(this._maskWidth/this._itemOuterWidth)||1;void 0!==max&&limitPerPage>max&&(limitPerPage=max),limitPerPage!==this._limitPerPage&&(firstItemOnPage=(this._currentPage-1)*this._limitPerPage+1,this._limitPerPage=limitPerPage,this._updatePages(),this.select(Math.ceil(firstItemOnPage/limitPerPage)))},Carousel.prototype._updateDistribution=function(){var spaces,width,moreThanOne=this._limitPerPage>1,freeSpace=this._maskWidth-this._itemOuterWidth*this._limitPerPage,extraWidth=Math.ceil(moreThanOne?freeSpace/this._limitPerPage/2:freeSpace);extraWidth===this._itemExtraWidth&&extraWidth>0||(this._itemExtraWidth=extraWidth,spaces=moreThanOne?this._limitPerPage-1:0,width=this._itemWidth+extraWidth,this._itemMargin=moreThanOne?Math.ceil(freeSpace/spaces/2):0,this._pageWidth=(this._itemOuterWidth+extraWidth+this._itemMargin)*this._limitPerPage,this._standbyFX(function(){this._$list.css("width",this._pageWidth*this._pages)}),this._$items.css({width:width,height:(width*this._itemHeight/this._itemWidth).toFixed(3),"margin-right":this._itemMargin}),this._$mask[0].style.height=ch.util.getOuterDimensions(this._$items[0]).height+"px",this._standbyFX(function(){this._translate(-this._pageWidth*(this._currentPage-1))}))},Carousel.prototype._addArrows=function(){ch.util.avoidTextSelection(this._$prevArrow,this._$nextArrow),this._$el.prepend(this._$prevArrow).append(this._$nextArrow),this._arrowsCreated=!0},Carousel.prototype._disableArrows=function(prev,next){this._$prevArrow.attr("aria-disabled",prev)[prev?"addClass":"removeClass"]("ch-carousel-disabled"),this._$nextArrow.attr("aria-disabled",next)[next?"addClass":"removeClass"]("ch-carousel-disabled")},Carousel.prototype._updateArrows=function(){this._arrowsCreated&&(1===this._pages?this._disableArrows(!0,!0):1===this._currentPage?this._disableArrows(!0,!1):this._currentPage===this._pages?this._disableArrows(!1,!0):this._disableArrows(!1,!1))},Carousel.prototype._translate=function(){var transform="-"+ch.util.VENDOR_PREFIX+"-transform";return ch.support.transition?function(displacement){this._$list.css(transform,"translateX("+displacement+"px)")}:function(displacement){this._$list[this._options.fx?"animate":"css"]({left:displacement})}}(),Carousel.prototype._switchPagination=function(from,to){if(this._paginationCreated){var children=this._$pagination.children();children.eq(from-1).attr("aria-selected",!1).removeClass("ch-carousel-selected"),children.eq(to-1).attr("aria-selected",!0).addClass("ch-carousel-selected")}},Carousel.prototype.refresh=function(){var that=this,maskWidth=ch.util.getOuterDimensions(this._$mask[0]).width;return maskWidth!==this._maskWidth&&(this._maskWidth=maskWidth,this._updateLimitPerPage(),this._updateDistribution(),this.emit("refresh")),this._$list.children().length!==this._$items.length&&(this._$items=this._$list.children(),this._updatePages(),this._currentPage>this._pages&&this._standbyFX(function(){that.select(that._pages)}),this.emit("refresh")),this},Carousel.prototype.select=function(page){return void 0===page?this._currentPage:!this._enabled||page===this._currentPage||1>page||page>this._pages?this:(this._translate(-this._pageWidth*(page-1)),this._switchPagination(this._currentPage,page),this._currentPage=page,this._updateArrows(),this._loadAsyncItems(),this.emit("select"),this)},Carousel.prototype.prev=function(){return this.select(this._currentPage-1),this.emit("prev"),this},Carousel.prototype.next=function(){return this.select(this._currentPage+1),this.emit("next"),this},Carousel.prototype.enable=function(){return this._el.setAttribute("aria-disabled",!1),this._disableArrows(!1,!1),parent.enable.call(this),this},Carousel.prototype.disable=function(){return this._el.setAttribute("aria-disabled",!0),this._disableArrows(!0,!0),parent.disable.call(this),this},Carousel.prototype.destroy=function(){this._el.parentNode.replaceChild(this._snippet,this._el),$(window.document).trigger(ch.onlayoutchange),parent.destroy.call(this)},ch.factory(Carousel)}(this,this.ch.$,this.ch),function(window,$,ch){"use strict";function Autocomplete($el,options){var that=this;return this._init($el,options),void 0!==this.initialize&&this.initialize(),window.setTimeout(function(){that.emit("ready")},50),this}var parent=ch.util.inherits(Autocomplete,ch.Component);Autocomplete.prototype.name="autocomplete",Autocomplete.prototype.constructor=Autocomplete,Autocomplete.prototype._defaults={loadingClass:"ch-autocomplete-loading",highlightedClass:"ch-autocomplete-highlighted",itemClass:"ch-autocomplete-item",addClass:"ch-box-lite ch-autocomplete",side:"bottom",align:"left",html:!1,_hiddenby:"none",keystrokesTime:150,_itemTemplate:'<li class="{{itemClass}}"{{suggestedData}}>{{term}}<i class="ch-icon-arrow-up" data-js="ch-autocomplete-complete-query"></i></li>'},Autocomplete.prototype._init=function($el,options){var that=this,POINTERDOWN="mousedown."+this.name,MOUSEENTER="mouseover."+this.name,highlightEvent=ch.support.touch?POINTERDOWN:MOUSEENTER;return parent._init.call(this,$el,options),this._options._itemTemplate=this._options._itemTemplate.replace("{{itemClass}}",this._options.itemClass),this._options.html&&(this._options._itemTemplate=this._options._itemTemplate.replace("{{suggestedData}}","")),this._$suggestionsList=$('<ul class="ch-autocomplete-list"></ul>'),this._popover=$.popover({reference:this._$el,content:this._$suggestionsList,side:this._options.side,align:this._options.align,addClass:this._options.addClass,hiddenby:this._options._hiddenby,width:this._el.getBoundingClientRect().width+"px",fx:this._options.fx}),this.$container=this._popover.$container.attr("aria-hidden","true").on(highlightEvent,function(event){that._highlightSuggestion($(event.target))}).on(POINTERDOWN,function(event){return"I"!==event.target.nodeName||that._options.html?void(("LI"===event.target.nodeName&&-1!==event.target.className.indexOf(that._options.itemClass)||"LI"===event.target.parentElement.nodeName&&-1!==event.target.parentElement.className.indexOf(that._options.itemClass))&&that._selectSuggestion()):(ch.util.prevent(event),that._el.value=that._suggestions[that._highlighted],void that.emit("type",that._el.value))}),this.$trigger=this._$el.attr({"aria-autocomplete":"list","aria-haspopup":"true","aria-owns":this.$container[0].id,autocomplete:"off"}).on("focus."+this.name,function(){that._turnOn()}).on("blur."+this.name,function(){that._turnOff()}),this._highlighted=null,this._suggestions=[],this._originalQuery=this._currentQuery=this._el.value,void 0!==this._configureShortcuts&&this._configureShortcuts(),this._$el.is(":focus")&&this._turnOn(),this},Autocomplete.prototype._turnOn=function(){if(!this._enabled)return this;var that=this;return this._originalQuery=this._el.value,this.$trigger.on(ch.onkeyinput,function(){return that._currentQuery=that._el.value.replace(/^\s+|\s+$/g,""),""===that._currentQuery?that.hide():(window.clearTimeout(that._stopTyping),void(that._stopTyping=window.setTimeout(function(){that.$trigger.addClass(that._options.loadingClass),that.emit("type",that._currentQuery)},that._options.keystrokesTime)))}),this},Autocomplete.prototype._turnOff=function(){return this._enabled?(this.hide(),this.$trigger.off(ch.onkeyinput),this):this},Autocomplete.prototype._selectSuggestion=function(){return window.clearTimeout(this._stopTyping),null===this._highlighted?this:(this._options.html||(this._el.value=this._suggestions[this._highlighted]),this._el.blur(),this.emit("select"),this)},Autocomplete.prototype._highlightSuggestion=function($target){var $suggestion=$target.attr("aria-posinset")?$target:$target.parents("li[aria-posinset]");return this._highlighted=void 0!==$suggestion[0]?parseInt($suggestion.attr("aria-posinset"),10)-1:null,this._toogleHighlighted(),this},Autocomplete.prototype._toogleHighlighted=function(){var id="#"+this.$container[0].id,current=null===this._highlighted?null:this._highlighted+1;return $(id+" [aria-posinset]."+this._options.highlightedClass).removeClass(this._options.highlightedClass),$(id+' [aria-posinset="'+current+'"]').addClass(this._options.highlightedClass),this},Autocomplete.prototype.suggest=function(suggestions){var $items,suggestedItem,term,el,that=this,items=[],matchedRegExp=new RegExp("("+this._currentQuery.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")+")","ig"),totalItems=0,itemTemplate=this._options._itemTemplate,suggestionsLength=suggestions.length;if(this.$trigger.removeClass(that._options.loadingClass),0===suggestionsLength)return this._popover.hide(),this;for(this._popover.isShown()||window.document.activeElement!==this._el||this._popover.show(),$("."+this._options.highlightedClass,this.$container).removeClass(this._options.highlightedClass),suggestedItem=0;suggestionsLength>suggestedItem;suggestedItem+=1)term=suggestions[suggestedItem],that._options.html||(term=term.replace(matchedRegExp,"<strong>$1</strong>"),itemTemplate=this._options._itemTemplate.replace("{{suggestedData}}",' data-suggested="'+suggestions[suggestedItem]+'"')),items.push(itemTemplate.replace("{{term}}",term));for(this._$suggestionsList[0].innerHTML=items.join(""),$items=$("."+this._options.itemClass,this.$container),totalItems=$items.length,this._suggestions.length=0,suggestedItem=0;totalItems>suggestedItem;suggestedItem+=1)el=$items[suggestedItem],that._suggestions.push(el.getAttribute("data-suggested")),el.setAttribute("aria-posinset",that._suggestions.length),el.setAttribute("aria-setsize",totalItems);return this._highlighted=null,this._suggestionsQuantity=this._suggestions.length,this},Autocomplete.prototype.hide=function(){return this._enabled?(this._popover.hide(),this.emit("hide"),this):this},Autocomplete.prototype.isShown=function(){return this._popover.isShown()},Autocomplete.prototype.disable=function(){return this.isShown()&&(this.hide(),this._el.blur()),parent.disable.call(this),this},Autocomplete.prototype.destroy=function(){this.$trigger.off("."+this.name).removeAttr("autocomplete aria-autocomplete aria-haspopup aria-owns"),this._popover.destroy(),parent.destroy.call(this)},ch.factory(Autocomplete)}(this,this.ch.$,this.ch);